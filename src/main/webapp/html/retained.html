<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>嘿设汇-运营助手</title>

    <!--  CSS -->
    <link href="static/css/style.css?v=1.0.0" rel="stylesheet">
</head>

<body>

    <div id="wrapper">

        <!-- Navigation -->
        <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">嘿设汇-运营助手</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html">运营助手</a>
            </div>
            <!-- Top Menu Items -->
            <ul class="nav navbar-right top-nav">
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-user"></i> ${name} <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="logout"><i class="fa fa-fw fa-power-off"></i>退出</a>
                        </li>
                    </ul>
                </li>
            </ul>
            <!-- Sidebar Menu Items - These collapse to the responsive navigation menu on small screens -->
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav navbar-nav side-nav">
                    <li>
                        <a href="index.html"><i class="fa fa-home"></i> 首页</a>
                    </li>
                    <!--<li class="active">
                        <a href="retained.html"><i class="fa fa-fw fa-dashboard"></i> 留存用户</a>
                    </li>
                    <li>
                        <a href="active.html"><i class="fa fa-heart"></i> 活跃用户</a>
                    </li>-->
                    <li>
                        <i class="fa fa-eye"></i>  <a href="stats.html">运营统计</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </nav>

        <div id="page-wrapper">

            <div class="container-fluid">

                <!-- Page Heading -->
                <div class="row">
                    <div class="col-lg-12">
                        <ol class="breadcrumb">
                            <li>
                                <i class="fa fa-home"></i>  <a href="index.html">首页</a>
                            </li>
                            <li class="active">
                                <i class="fa fa-dashboard"></i>  <a href="retained.html">留存用户</a>
                            </li>
                        </ol>
                    </div>
                </div>
                <!-- /.row -->


                <div class="row">
                    <div class="col-lg-12">
                        <form action="" class="form-inline form-list"  role="form">
                            <fieldset>
                                <div class="form-group" style="float: left">
                                    <label  class=" control-label">选择平台:</label>
                                    <select class="form-control  input-sm" id="device"  style="width: 150px;background-color: #eeeeee;border-color: #dddddd;color: #333333;">
                                        <option selected>Android</option>
                                        <option>iOS</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="dtp_input2" class=" control-label">选择日期:</label>
                                    <div class="input-group date form_date" data-date="" data-date-format="yyyy-mm-dd" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                        <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                        <input class="form-control" id="start_date" style="cursor: pointer;" size="16" type="text" value="2015-08-08" readonly>
                                        <!-- <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span> -->
                                        
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="dtp_input2" class=" control-label">~</label>
                                    <div class="input-group date form_date" data-date="" data-date-format="yyyy-mm-dd" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                        <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                        <input class="form-control" id="end_date" style="cursor: pointer;" size="16" type="text" value="" readonly>
                                        <!-- <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span> -->
                                        
                                    </div>
                                </div>
                            </fieldset>
                        </form>
                    </div>
                </div>
                <!-- /.row -->

                <div class="row">
                    <div class="col-lg-12">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3 class="panel-title"><i class="fa fa-bar-chart-o fa-fw"></i> 留存用户
                                    <ul class="list-inline list-link">
                                        <li><a href="#" class="btn active">日</a></li>
                                        <li><a href="#" class="btn">周</a></li>
                                        <li><a href="#" class="btn">月</a></li>
                                        <li><a onclick="refreshUserActiveData();"><i class="fa fa-refresh"></i></a></li>
                                    </ul>
                                </h3>
                            </div>
                            <div class="panel-body table-responsive" style="padding:0">
                                <table class="table table-bordered table-hover">
                                    <thead>
                                        <tr>
                                            <th>首次使用时间</th>
                                            <th>新增用户</th>
                                            <th>留存率</th>
                                        </tr>
                                        <tr class="table-time">
                                        </tr>
                                    </thead>
                                    <tbody id="table_content">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- /.row -->

            </div>
            <!-- /.container-fluid -->

        </div>
        <!-- /#page-wrapper -->

    </div>
    <!-- /#wrapper -->

    <!-- jQuery -->
    <script src="static/js/jquery-1.11.3.min.js?v=1.11.1"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="static/js/bootstrap.min.js?v=3.3.4"></script>
    <!-- datetimepicker http://www.bootcss.com/p/bootstrap-datetimepicker/index.htm -->
    <script src="static/js/datetimepicker/bootstrap-datetimepicker.min.js?v=2.0.0"></script>
    <script type="text/javascript" src="static/js/datetimepicker/locales/bootstrap-datetimepicker.zh-CN.js?v=2.0.0"></script>

    <!-- Morris Charts JavaScript -->
    <!--<script src="static/js/plugins/morris/raphael.min.js?v=0.5.0"></script>
    <script src="static/js/plugins/morris/morris.min.js?v=0.5.0"></script>
    <script src="static/js/plugins/morris/morris-data.js?v=0.5.0"></script>-->

    <!-- logic -->
    <script src="static/js/logic/retained.js?v=0.0.1"></script>

    <script type="text/javascript">
        

        $('.form_date').datetimepicker({
            language:  'zh-CN',
            weekStart: 1,
            todayBtn:  1,
            autoclose: 1,
            todayHighlight: 1,
            startView: 2,
            minView: 2,
            forceParse: 0
        });

        var myDate = new Date();
        var year = myDate.getFullYear();
        var month = myDate.getMonth()+1;
        if(month<10){
            month = "0"+month;
        }
        var day = myDate.getDate();
        if(day<10){
            day = "0"+day;
        }
        var end_date = year+"-"+month+"-"+day;
        $('#end_date').val(end_date);

        $('.list-link li .btn').click(function(){
            $('.list-link li .btn').removeClass('active');
            $(this).addClass('active');
            tableTime($(this).html());
        });
       
        $(window).load(function(){ 
            tableTime($('.list-link li .active').html());
        }); 

        function tableTime(a) {
            var tebleDay = [1,2,3,4,5,6,7,14,30];
            var txt;
            $('.table-time').html("<th></th><th></th>");
            switch(a){
                case '日':
                    for (var i = 0; i < tebleDay.length; i++) {
                        txt = "<th>"+tebleDay[i]+"天后</th>";
                        $('.table-time').append(txt);
                    };
                    break;
                case '周':
                    for (var i = 1; i < 10; i++) {
                        txt ="<th>"+i+"周后</th>";
                        $('.table-time').append(txt);               
                    };
                    break;
                case '月':
                    for (var i = 1; i < 10; i++) {
                        txt ="<th>"+i+"月后</th>"                        
                        $('.table-time').append(txt);                    
                    };
                    break;
            }
        }
    </script>

</body>

</html>
